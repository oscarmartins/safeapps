<style>

        .center-div
        {
          position: absolute;
          left: 50%;
          top: 50%;
          -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
        }
        </style>
         
        <div class="outer-div">
            <div id="recoveryPwdForm" style="width: 500px;" class="center-div"></div>  
        </div>
        
        <script type="text/javascript">
            /**
            {
                "REQ_CONTEX":4000,
                "REQ_ACTION":4010,
                "REQ_INPUTS": {
                        "email":"oscarrafaelcampos@gmail.com",
                        "code":null,
                        "password":null,
                        "confirmPassword":null
                    }
            }
            **/
            $(function () {
                
                $().w2destroy('recoveryPwdForm');
                $('#recoveryPwdForm').w2form({ 
                    name   : 'recoveryPwdForm',
                    header : 'Recuperar Conta',
                    recid  : 300,
                    url: {save:orcsettings.server.serverUrlApi},
                    method: 'POST',
                    fields : [{name: 'email', type: 'email', required: true, html: { caption: 'User Email', attr: 'style="width: 300px"' } }],
                    postData: {
                        REQ_CONTEX : orcsettings.ApiPolicy.services.w2ui, 
                        REQ_ACTION : orcsettings.ApiPolicy.ACCOUNT_RECOVERY_EMAIL,
                        REQ_INPUTS: {}
                    },
                    actions: {
                        'Recovery Account': function (event) {
                            if(this.validate()) {
                                this.save({login: new Date}, function(res) {
                                    debugger     
                                    
                                    //res.dataresponse.output.success
                                    
                                    let formAction = w2ui.recoveryPwdForm.postData.REQ_ACTION
                                    const disableFields = []
                                    switch (formAction) {
                                        case orcsettings.ApiPolicy.ACCOUNT_RECOVERY_EMAIL:
                                            w2ui.recoveryPwdForm.postData.REQ_ACTION = orcsettings.ApiPolicy.ACCOUNT_RECOVERY_CODE
                                            disableFields.push('email')                                           
                                            break;
                                        case orcsettings.ApiPolicy.ACCOUNT_RECOVERY_CODE:
                                            w2ui.recoveryPwdForm.postData.REQ_ACTION = orcsettings.ApiPolicy.ACCOUNT_RECOVERY_RESET
                                            disableFields.push('email')
                                            disableFields.push('code')
                                            break;
                                        case orcsettings.ApiPolicy.ACCOUNT_RECOVERY_RESET:
                                            disableFields.push('email')
                                            disableFields.push('code')
                                            disableFields.push('password')
                                            disableFields.push('passwordConfirm')
                                            break;                                    
                                        default:
                                            break;
                                    }

                                    w2ui.recoveryPwdForm.fields.forEach(function (who){
                                        who.disabled = true;
                                        return who.disabled
                                    })      
                                    w2ui.recoveryPwdForm.refresh()
                                                                          
                                    /**
                                    if (disableFields) {
                                        var fields = null
                                        disableFields.forEach(function (theName){
                                            fields = w2ui.recoveryPwdForm.fields.forEach(function (who){
                                                if (who.name===theName) {
                                                    who.disabled = true;
                                                }
                                                return who.disabled
                                            })                                            
                                        })
                                        w2ui.recoveryPwdForm.refresh();
                                    }     
                                    **/
                                    var fields = res.dataresponse.output.success.fields
                                    for (let index = 0; index < fields.length; index++) {
                                        const item = fields[index];
                                        w2ui.recoveryPwdForm.fields.push(item)
                                    }
                                    w2ui.recoveryPwdForm.formHTML = w2ui.recoveryPwdForm.generateHTML()
                                    w2ui.recoveryPwdForm.render()

                                });
                            }
                        },
                        'Clear': function (event) {
                            console.log('clear', event);                            
                            w2ui.recoveryPwdForm.fields.forEach(function (who){
                                who.disabled = false;
                                return who.disabled
                            })
                            this.clear();        
                        }
                    }
                });
            });
            </script>